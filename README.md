# MUBES_UBEM
Python Script based UBEM simulation tool using EnergyPlus (EP) as the core engine.
It has been developed in Python 3.7 with EP 9.1 and has been successfully tested with EP 9.4.
It is based on 2 main packages: [EPPY](https://github.com/santoshphilip/eppy) and [GeomEppy](https://github.com/jamiebull1/geomeppy).

## Installation process
EPPY can be installed directly from pip (eppy 0.5.53), see the requirements.txt file.
GeomEppy needs to be taken from https://github.com/xavfa/geomeppy and make sure it is pointing on the correct branch (MultiFloor_complexe_Building)
as many changes have be done in order to comply with more complex building footprints.
Besides, other changes might be also needed as MUBES_UBEM is just at the beginning of its development.

## Run simulation case
The ModelerFolder is the playground of the Modeler. A subfoler InputFiles is used for all needed files that can be automatically generated by the script and used afterward for each simulation as inputfiles.
The already existing file is for InternalLoads. It has been generated using StROBe package and gives hourly mean power usage values over 10 apartments. Some other can be created depending on the options the modeler takes in the DB_Data.py file or directly in the builder process. 
Several templates are proposed in the same folder. These needs to be copy/paste to your local space, keeping the copy in the ModelerFolder. The local files will thus be your toys for the playground while the templates remain unchanged and enable to be updated if major modification were proposed.
IMPORTANT :
The copy of Pathway_Template.txt needs to be named Pathways.txt. As shown in the template it gives the local paths to the goejson files as well as to the Energy Plus folder in your environment.
In the same way, the copy of Outputs_Template.txt needs to be named Outputs.txt. As written in the file, the wanted ouputs just have to be marked by double hashtags with space in front of their name.
Both copies of CaseBuilder_Template.py and ReadOutputs_Template.py should be renamed as one wishes. the Templates gives example of builder files, simulation runs and post-treatment analyses.

New folders are created during the process inside 'ModelerFolder':
'RunningFolder' contains the inputs file of each case to be simulated. A subfolder 'Sim_Results' will contain pickle files of each simulated run (for each input case file).
During each run, a specific subfoler is created for each building and then removed after its simulation ends.
Thus, at the end of the full process, a new folder remains with, for each run, the .idf and .pickles files (EnergyPlus input file and the building object with its parameters from the geojson file).
A subfolder 'Sim_Results' contains all the results in .pickle files. The name of this new folder is to be specified in the builder (see template, 'CaseName' input)

The simulation process uses multiprocessing package, thus a maximum CPU factor is to be specified in the builder (see template).

## Engine structure
The paradigm of simulation engine is to automate simulation on several different levels :
- simulation level (deals with simulation parameters),
- building level (deals with geometry, envelope and material),
- zone level (deals with internal loads, HVAC and all element needed at the zone level), and then 
- output levels (deals with outpouts variables and frequency).
